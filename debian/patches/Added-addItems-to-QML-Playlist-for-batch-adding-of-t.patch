From 7228e7c8b79cd4ae74c6abd12317b43a7b1e6334 Mon Sep 17 00:00:00 2001
From: Jim Hodapp <jim.hodapp@canonical.com>
Date: Mon, 26 Oct 2015 13:17:02 -0400
Subject: [PATCH] Added addItems to QML Playlist for batch adding of tracks.

Change-Id: Ieb7df35ad9dd50bbc68e5305e0de9fb26c64b540
Reviewed-by: Yoann Lopes <yoann.lopes@theqtcompany.com>
---
 src/imports/multimedia/qdeclarativeplaylist.cpp | 23 +++++++++++++++++++++++
 src/imports/multimedia/qdeclarativeplaylist_p.h |  1 +
 2 files changed, 24 insertions(+)

diff --git a/src/imports/multimedia/qdeclarativeplaylist.cpp b/src/imports/multimedia/qdeclarativeplaylist.cpp
index bb785aa..c6ea1bd 100644
--- a/src/imports/multimedia/qdeclarativeplaylist.cpp
+++ b/src/imports/multimedia/qdeclarativeplaylist.cpp
@@ -421,6 +421,29 @@ bool QDeclarativePlaylist::addItem(const QUrl &source)
 }
 
 /*!
+    \qmlmethod bool QtMultimedia::Playlist::addItems(sources)
+
+    Appends the list of URLs in \a sources to the playlist.
+
+    Returns true if the \a sources are added successfully.
+
+    \since 5.7
+*/
+bool QDeclarativePlaylist::addItems(const QList<QUrl> &sources)
+{
+    if (sources.isEmpty())
+        return false;
+
+    QList<QMediaContent> contents;
+    QList<QUrl>::const_iterator it = sources.constBegin();
+    while (it != sources.constEnd()) {
+        contents.push_back(QMediaContent(*it));
+        ++it;
+    }
+    return m_playlist->addMedia(contents);
+}
+
+/*!
     \qmlmethod bool QtMultimedia::Playlist::insertItem(index, source)
 
     Inserts the \a source URL to the playlist at the given \a index.
diff --git a/src/imports/multimedia/qdeclarativeplaylist_p.h b/src/imports/multimedia/qdeclarativeplaylist_p.h
index fd94135..2c6d015 100644
--- a/src/imports/multimedia/qdeclarativeplaylist_p.h
+++ b/src/imports/multimedia/qdeclarativeplaylist_p.h
@@ -152,6 +152,7 @@ public Q_SLOTS:
     void load(const QUrl &location, const QString &format = QString());
     bool save(const QUrl &location, const QString &format = QString());
     bool addItem(const QUrl &source);
+    bool addItems(const QList<QUrl> &sources);
     bool insertItem(int index, const QUrl &source);
     bool removeItem(int index);
     bool clear();
-- 
2.6.4

